<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Buscador de Películas</title>
    <link rel="stylesheet" href="css/style.css" />
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  </head>
  <body>
    <header>
      <h1>Buscador de Películas</h1>
    </header>
    <div class="header-actions" style="text-align: center; margin-top: 0.5rem">
      <button id="toggle-search" class="btn-secondary" aria-expanded="true">
        Ocultar búsqueda
      </button>
    </div>

    <main>
      <!-- Formulario de usuario -->
      <section id="user-section" class="card">
        <form id="user-form" aria-labelledby="user-title">
          <h3 id="user-title">Configura tu experiencia</h3>
          <div class="form-row">
            <input
              type="text"
              id="user-name"
              placeholder="Tu nombre"
              aria-label="Nombre"
            />
            <select id="user-genre" aria-label="Género favorito" placeholder="Elige tu género favorito">
              <option value="Action">Acción</option>
              <option value="Adventure">Aventura</option>
              <option value="Comedy">Comedia</option>
              <option value="Drama">Drama</option>
              <option value="Horror">Terror</option>
              <option value="Romance">Romance</option>
              <option value="Sci-Fi">Ciencia ficción</option>
              <option value="Thriller">Suspense</option>
            </select>

            <input
              type="text"
              id="user-platform"
              placeholder="Plataforma favorita (opcional)"
              aria-label="Plataforma"
            />
          </div>
          <div class="form-actions">
            <button type="submit" class="btn-primary">Guardar</button>
          </div>
          <p id="user-msg" class="small" aria-live="polite"></p>
        </form>
      </section>

      <!-- Buscador de películas -->
      <section id="search-section">
        <form id="movie-form" class="card" aria-labelledby="search-label">
          <div class="form-row">
            <label id="search-label" for="movie-input" class="sr-only"
              >Título de película</label
            >
            <input
              type="text"
              id="movie-input"
              placeholder="Título o palabra clave (p.ej. 'Matrix')"
              required
              aria-describedby="search-help"
              aria-controls="movie-list"
            />
            <button type="submit" class="btn-primary">Buscar</button>
          </div>
          <div class="form-row" style="margin-top: 0.5rem; align-items: center; gap: 0.5rem">
            <label for="sort-select" class="small">Ordenar por:</label>
            <select id="sort-select" aria-label="Ordenar resultados">
              <option value="relevance">Más relevantes (por OMDb)</option>
              <option value="title-asc">Título A→Z</option>
              <option value="title-desc">Título Z→A</option>
              <option value="year-desc">Año (más nuevo)</option>
              <option value="year-asc">Año (más antiguo)</option>
              <option value="rating-desc">IMDB Rating (mayor primero)</option>
            </select>
          </div>
          <p id="search-help" class="small">
            Presiona Enter o click en Buscar para obtener resultados. Usa Tab
            para navegar. Cambia "Ordenar por" para reordenar los resultados
            mostrados.
          </p>
          <div class="form-actions">
            <button
              type="button"
              id="toggle-advanced"
              class="btn-link"
              aria-expanded="false"
              aria-controls="advanced-form"
            >
              Búsqueda avanzada ▾
            </button>
          </div>
          <div
            id="advanced-form"
            class="advanced card hidden"
            aria-hidden="true"
          >
            <div class="form-row">
              <div style="flex: 1">
                <label for="filter-year">Año:</label>
                <input
                  type="number"
                  id="filter-year"
                  min="1900"
                  max="2100"
                  step="1"
                  placeholder="Ej: 2019"
                />
              </div>
              <div style="flex: 1">
                <label for="filter-year-to">Año (hasta):</label>
                <input
                  type="number"
                  id="filter-year-to"
                  min="1900"
                  max="2100"
                  step="1"
                  placeholder="Ej: 2022"
                />
              </div>
            </div>
            <select id="filter-genre" aria-label="Género" placeholder="Elige tu género favorito">
              <option value="Action">Acción</option>
              <option value="Adventure">Aventura</option>
              <option value="Comedy">Comedia</option>
              <option value="Drama">Drama</option>
              <option value="Horror">Terror</option>
              <option value="Romance">Romance</option>
              <option value="Sci-Fi">Ciencia ficción</option>
              <option value="Thriller">Suspense</option>
            </select>
            <select id="filter-type" aria-label="Tipo">
              <option value="movie">Película</option>
              <option value="series">Serie</option>
            </select>
          </div>
        </form>
        <p id="error-msg" class="error" role="status" aria-live="polite"></p>
        <div
          id="spinner"
          class="spinner hidden"
          role="status"
          aria-hidden="true"
          aria-live="polite"
        ></div>
      </section>

      <!-- Resultados -->
      <section id="results-section">
        <ul
          id="movie-list"
          class="movie-grid"
          role="list"
          aria-live="polite"
          aria-busy="false"
        ></ul>
        <p id="no-results" class="small hidden">
          No se encontraron resultados.
        </p>
      </section>

      <!-- Detalles -->
      <section id="details-section">
        <div id="movie-details"></div>
      </section>

      <!-- Tabs: Sugerencias / Juego -->
      <section id="tools-section" class="card">
        <div role="tablist" aria-label="Herramientas" id="tools-tabs">
          <button
            role="tab"
            aria-selected="true"
            aria-controls="panel-feedback"
            id="tab-feedback"
            class="tab-btn"
          >
            Sugerencias
          </button>
          <button
            role="tab"
            aria-selected="false"
            aria-controls="panel-game"
            id="tab-game"
            class="tab-btn"
          >
            Juego
          </button>
        </div>

        <!-- Panel Sugerencias -->
        <div
          id="panel-feedback"
          role="tabpanel"
          tabindex="0"
          aria-labelledby="tab-feedback"
        >
          <form
            id="feedback-form"
            class="card"
            aria-labelledby="feedback-title"
          >
            <h3 id="feedback-title">Enviar sugerencia / Informe</h3>
            <div class="form-row">
              <input
                type="text"
                id="fb-name"
                placeholder="Tu nombre"
                required
                aria-label="Nombre"
              />
              <input
                type="email"
                id="fb-email"
                placeholder="Tu correo (opcional)"
                aria-label="Correo"
              />
            </div>
            <div class="form-row">
              <select id="fb-category" aria-label="Categoría">
                <option value="general">General</option>
                <option value="bug">Bug</option>
                <option value="ux">UX</option>
                <option value="feature">Feature</option>
              </select>
              <select id="fb-priority" aria-label="Prioridad">
                <option value="low">Baja</option>
                <option value="medium" selected>Media</option>
                <option value="high">Alta</option>
              </select>
            </div>
            <div>
              <textarea
                id="fb-text"
                rows="5"
                placeholder="Describe aquí tu sugerencia o el problema (máx 1000 caracteres)"
                required
                aria-label="Sugerencia"
              ></textarea>
            </div>
            <div class="form-row">
              <input
                type="url"
                id="fb-screenshot"
                placeholder="URL de captura (opcional)"
                aria-label="Captura URL"
              />
              <input
                type="text"
                id="fb-app-version"
                placeholder="Versión / User Agent (opcional)"
                aria-label="Versión"
              />
            </div>
            <div class="form-actions">
              <button type="submit" class="btn-primary">Enviar</button>
              <button type="button" id="fb-clear" class="btn-link">
                Limpiar
              </button>
            </div>
            <p id="fb-msg" class="small" aria-live="polite"></p>
          </form>
        </div>

        <!-- Panel Juego -->
        <div
          id="panel-game"
          role="tabpanel"
          tabindex="0"
          aria-labelledby="tab-game"
          hidden
        >
          <div>
            <h3>Juego: Adivina la película</h3>
            <p class="small">
              Adivina el título de la película a partir del póster. Las opciones
              se generan automáticamente.
            </p>
            <div id="game-card">
              <p id="game-prompt" class="small"></p>
              <div class="form-row">
                <input
                  type="text"
                  id="game-guess"
                  placeholder="Escribe el título aquí"
                  aria-label="Adivina película"
                />
                <button type="button" id="game-submit" class="btn-primary">
                  Probar
                </button>
              </div>
              <div id="game-feedback" class="small"></div>
              <div class="form-actions">
                <button type="button" id="game-next" class="btn-link">
                  Siguiente
                </button>
                <button type="button" id="game-reset" class="btn-link">
                  Reiniciar
                </button>
              </div>
              <p id="game-score" class="small">
                Puntuación: <span id="game-score-val">0</span>
              </p>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <p>&copy; 2025 SmartRecipes - SPAs</p>
    </footer>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/helpers.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>
